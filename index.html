<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
    <title>Two Truths and a Lie</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Side Menu -->
    <div id="side-menu" class="side-menu">
        <div class="side-menu-header">
            <h3>Settings</h3>
            <button id="close-menu" class="close-menu-btn">&times;</button>
        </div>
        <div class="side-menu-content">
            <div class="menu-section">
                <h4>Language</h4>
                <div class="menu-options">
                    <button id="lang-en" class="menu-option active">English</button>
                    <button id="lang-vi" class="menu-option">Tiếng Việt</button>
                </div>
            </div>
            <div class="menu-section">
                <h4>Theme</h4>
                <div class="menu-options">
                    <button id="theme-toggle" class="menu-option">Dark Mode</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Menu Button -->
    <button id="menu-btn" class="menu-btn">☰</button>
    
    <!-- Menu Overlay -->
    <div id="menu-overlay" class="menu-overlay"></div>

    <div id="welcome-popup">
        <div class="popup-content">
        <p class="quote">"This game helps you get to know each other deeply through personal topics and surprising truths hidden among made-up stories. Have fun!"<br><span class="quote-author">- Duong Tung Nguyen</span></p>
        <p id="countdown" class="countdown"></p>
        </div>
    </div>
    <div id="app">
        <div id="welcome-screen">
            <h1 id="main-title">Two Truths and a Lie</h1>
            
            <div class="game-instructions">
                <h3 id="instructions-title">How to Play:</h3>
                <div id="instructions-content">
                    <ol>
                        <li>Two players join the same room</li>
                        <li>Each player takes turns creating 3 statements about themselves</li>
                        <li>2 statements are lies, 1 statement is the truth</li>
                        <li>Mark which statement is TRUE using the check icon</li>
                        <li>The other player tries to guess which one is the truth</li>
                        <li>Score points for correct guesses!</li>
                        <li>Play 5 rounds and see who wins!</li>
                    </ol>
                </div>
            </div>
            
            <div class="game-settings">
                <h3 id="settings-title">Game Settings:</h3>
                <div class="setting-group">
                    <label for="round-count" id="rounds-label">Number of Rounds:</label>
                    <select id="round-count">
                        <option value="3">3 Rounds</option>
                        <option value="5" selected>5 Rounds</option>
                        <option value="7">7 Rounds</option>
                        <option value="10">10 Rounds</option>
                    </select>
                </div>
            </div>
            
            <div class="room-section">
                <div class="input-group">
                    <input type="text" id="player-name" placeholder="Enter Your Name">
                </div>
                <div class="input-group">
                    <input type="text" id="room-name" placeholder="Enter Room Name">
                </div>
                <div class="button-group">
                    <button id="join-room">Join Room</button>
                    <button id="view-history-btn">View History</button>
                </div>
            </div>
        </div>

        <div id="history-screen" class="hidden">
            <h2>Game History</h2>
            <p id="history-instructions">Click a session below to view details.</p>
            <ul id="history-list"></ul>
            <div id="session-detail" class="hidden">
                <h3>Session Details</h3>
                <ul id="detail-list"></ul>
                <button id="back-to-history">Back</button>
            </div>
            <button id="clear-history">Clear History</button>
            <button id="back-to-menu">Back to Menu</button>
        </div>

        <div id="game-screen" class="hidden">
            <div id="game-info">
                <div class="player-info">
                    <div id="player-display" class="player-badge">
                        <span id="player-number"></span>
                        <span id="player-name-display"></span>
                    </div>
                </div>
                <div id="scoreboard" class="scoreboard">
                    <div class="score-item" id="player1-score">
                        <span class="player-name" id="player1-name">Player 1</span>
                        <span class="player-score" id="player1-points">0</span>
                    </div>
                    <div class="vs-divider">VS</div>
                    <div class="score-item" id="player2-score">
                        <span class="player-name" id="player2-name">Player 2</span>
                        <span class="player-score" id="player2-points">0</span>
                    </div>
                </div>
                <div class="game-controls">
                    <p id="game-status" class="status-message"></p>
                    <button id="exit-game" class="exit-btn">Exit Game</button>
                </div>
            </div>
            <h2 id="round-title"></h2>
            
            <div id="topic-selection-area" class="hidden">
                <p id="topic-prompt"></p>
                <div id="topic-grid" class="topic-grid"></div>
                <div id="topic-suggestions" class="topic-suggestions hidden">
                    <h4 id="suggestions-title">Suggested answers for <span id="current-topic-name"></span>:</h4>
                    <ul id="suggestion-list"></ul>
                    <button id="select-current-topic" class="hidden">Select This Topic</button>
                </div>
                <div id="selected-topics">
                    <h4 id="selected-topics-title">Selected Topics:</h4>
                    <div id="selected-topic-list"></div>
                    <button id="confirm-topics" class="hidden">Confirm Topic Selection</button>
                </div>
            </div>
            
            <div id="input-area">
                <p id="input-prompt"></p>
                <div id="current-topic" class="current-topic hidden">
                    <h4>Your Topic: <span id="topic-display"></span></h4>
                    <button id="see-topic-btn" class="see-topic-btn">See Topic Suggestions</button>
                </div>
                <div id="topic-help" class="topic-suggestions hidden">
                    <h4>Suggestions for <span id="help-topic-name"></span>:</h4>
                    <ul id="help-suggestion-list"></ul>
                    <button id="hide-topic-help" class="hide-help-btn">Hide Suggestions</button>
                </div>
                <div class="statement-input-group">
                    <input type="text" id="statement1" placeholder="Statement 1">
                    <label class="radio-label" title="Mark as truth">
                        <input type="radio" name="truth-selection" value="0" id="radio-1">
                        <span class="radio-icon">&#10004;</span>
                    </label>
                </div>
                <div class="statement-input-group">
                    <input type="text" id="statement2" placeholder="Statement 2">
                    <label class="radio-label" title="Mark as truth">
                        <input type="radio" name="truth-selection" value="1" id="radio-2">
                        <span class="radio-icon">&#10004;</span>
                    </label>
                </div>
                <div class="statement-input-group">
                    <input type="text" id="statement3" placeholder="Statement 3">
                    <label class="radio-label" title="Mark as truth">
                        <input type="radio" name="truth-selection" value="2" id="radio-3">
                        <span class="radio-icon">&#10004;</span>
                    </label>
                </div>
                <button id="submit-statements">Submit</button>
            </div>
            <div id="guess-area" class="hidden">
                <p id="guess-prompt"></p>
                <div id="opponent-topic" class="current-topic hidden">
                    <h4>Topic: <span id="opponent-topic-display"></span></h4>
                </div>
                <button class="statement-btn" id="statement-btn-1"></button>
                <button class="statement-btn" id="statement-btn-2"></button>
                <button class="statement-btn" id="statement-btn-3"></button>
            </div>
            <p id="result-message"></p>
            <button id="next-round" class="hidden">Next Round</button>
        </div>

        <div id="end-screen" class="hidden">
            <h2>Game Over!</h2>
            <p id="final-score"></p>
            <p id="winner"></p>
            <button id="play-again">Play Again</button>
            <button id="exit-final" class="exit-btn">Exit to Menu</button>
        </div>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>